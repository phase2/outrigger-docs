<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Phase2">
  <link rel="shortcut icon" href="../../favicon.ico">
  
  <title>Working with Volumes - Outrigger Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Working with Volumes";
    var mkdocs_page_input_path = "common-tasks/working-with-volumes.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-305109-83', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Outrigger Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Getting Started</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../getting-started/system-requirements/">System Requirements</a>
                </li>
                <li class="">
                    
    <a class="" href="../../getting-started/mac-installation/">Mac Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../getting-started/linux-installation/">Linux Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../getting-started/windows-installation/">Windows Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../getting-started/first-steps/">First Steps</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Project Setup</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../project-setup/key-concepts/">Key Concepts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../project-setup/new-projects/">New Projects</a>
                </li>
                <li class="">
                    
    <a class="" href="../../project-setup/existing-projects/">Existing Projects</a>
                </li>
                <li class="">
                    
    <a class="" href="../../project-setup/project-configuration/">Project Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../project-setup/filesystem-sync/">Filesystem Sync</a>
                </li>
                <li class="">
                    
    <a class="" href="../../project-setup/docker-images/">Docker Images</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Common Tasks</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../starting-your-project-containers/">Starting your project containers</a>
                </li>
                <li class="">
                    
    <a class="" href="../stopping-containers-and-cleanup/">Stopping containers and cleanup</a>
                </li>
                <li class="">
                    
    <a class="" href="../using-the-build-container/">Using the build container</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Working with Volumes</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#working-with-volumes">Working with Volumes</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#provide-code-for-a-generic-container-to-run">Provide code for a generic container to run*</a></li>
        
            <li><a class="toctree-l4" href="#persist-data-longer-than-the-life-of-the-container">Persist data longer than the life of the container</a></li>
        
            <li><a class="toctree-l4" href="#override-directories-and-files-that-exist-in-an-image">Override directories and files that exist in an image</a></li>
        
            <li><a class="toctree-l4" href="#changing-volume-definitions-in-compose-file">Changing Volume Definitions in Compose File</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../working-offline/">Working Offline</a>
                </li>
                <li class="">
                    
    <a class="" href="../ssh-into-a-container/">SSH into a container</a>
                </li>
                <li class="">
                    
    <a class="" href="../customizing-container-configuration/">Changing container configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../using-watches/">Using watches</a>
                </li>
                <li class="">
                    
    <a class="" href="../using-xdebug-with-outrigger/">Using Xdebug with Outrigger</a>
                </li>
                <li class="">
                    
    <a class="" href="../accessing-logs/">Accessing logs</a>
                </li>
                <li class="">
                    
    <a class="" href="../inter-vm-communication/">Accessing containers from other VMs</a>
                </li>
                <li class="">
                    
    <a class="" href="../ssh-keys-for-private-repos/">SSH Keys for private repos</a>
                </li>
                <li class="">
                    
    <a class="" href="../setting-up-mail/">Setting up mail</a>
                </li>
                <li class="">
                    
    <a class="" href="../dns-resolution/">DNS Resolution</a>
                </li>
                <li class="">
                    
    <a class="" href="../upgrading-rig/">Upgrading Rig</a>
                </li>
                <li class="">
                    
    <a class="" href="../multiple-docker-machines/">Multiple Docker Machines</a>
                </li>
                <li class="">
                    
    <a class="" href="../routine-image-maintenance/">Routine Image Maintenance</a>
                </li>
                <li class="">
                    
    <a class="" href="../creating-your-own-images/">Creating your own images</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">FAQ</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../faq/general/">General</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faq/troubleshooting/">Troubleshooting</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faq/docker-for-mac/">Docker for Mac</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faq/how-to-contribute/">How to contribute</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Appendix</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../appendix/glossary/">Glossary</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appendix/return-codes/">Return Codes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appendix/architecture/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appendix/background/">Background</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appendix/library/">Library</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Outrigger Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Common Tasks &raquo;</li>
        
      
    
    <li>Working with Volumes</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/phase2/outrigger-docs/edit/master/docs/common-tasks/working-with-volumes.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="working-with-volumes">Working with Volumes</h1>
<p>Volumes are a way that you can map directories or individual files into a running container.  This is useful to provide 
code to run for a generic container, or directories to store data that persist longer than the life of the container, or 
to even override directories and/or files that exist in an image.  Lets look at a few of those examples.</p>
<h2 id="provide-code-for-a-generic-container-to-run">Provide code for a generic container to run*</h2>
<p>The default phase2/apache-php:php70 is a Web/PHP container that provides only an index file in <code>/var/www/html</code> that 
prints out phpinfo().  This is obviously not very useful for an application, so we can provide an entire Drupal site to 
run and we do that by mapping our site into the default docroot like this:</p>
<p><code>./build/html:/var/www/html</code></p>
<p>This takes the Drupal site we have in our local project directory of <code>build/html</code> and it overrides the default content 
of the images <code>/var/www/html</code> directory.</p>
<h2 id="persist-data-longer-than-the-life-of-the-container">Persist data longer than the life of the container</h2>
<p>When using a database like MySQL the container will store the database files in <code>/var/lib/mysql</code> and by default that 
directory will be reset every time the container restarts. This means each time you restart your container you'd need 
to reinstall your application and database, which can make life difficult. So in order to persist MySQL data for longer 
than the current run of the container we will map a directory from the Docker Host into the container and override the 
default <code>/var/lib/mysql</code> directory. The configuration will look something like this.</p>
<p><code>/data/drupal/mysql:/var/lib/mysql</code></p>
<p>Now when your database container creates files in <code>/var/lib/mysql</code> they are actually saved in the <code>/data/drupal/mysql</code> 
directory on the Docker Host. Be sure to namespace your directories inside /data so that separate projects don't conflict 
with each other. You'll also want to ensure you clean up when you are done with your project to keep from using up all 
of your disk space. See the cleaning up section for more info.</p>
<h2 id="override-directories-and-files-that-exist-in-an-image">Override directories and files that exist in an image</h2>
<p>Generally the configuration shipped with a Docker Image is meant to be the production configuration. Often, that 
configuration is not suitable for development and we need to override configurations.  With volumes we have shown 
earlier how you can override directories, but you can also override individual files too.</p>
<p><code>./config/dev/httpd/httpd.conf:/etc/httpd/httpd.conf</code></p>
<p>This takes a local <code>httpd.conf</code> file from our project and overrides the <code>/etc/httpd/httpd.conf</code> files that ships with 
the container. </p>
<h2 id="changing-volume-definitions-in-compose-file">Changing Volume Definitions in Compose File</h2>
<p>If you wind up changing volume definitions in your docker-compose file you will need to remove your container before it 
will recognize those changes on a restart.</p>
<p>In the project directory, run: <code>docker-compose rm</code></p>
<p>This command will remove all stopped containers defined in the docker-compose.yml.  You could also remove an individual 
container by running: <code>docker-compose rm &lt;name in yml&gt;</code></p>
<p>After removing the container, it will revert to the original state from the Docker image, removing any packages 
installed or files modified that are not included in a volume mount. Start your containers again with <code>docker-compose up</code> 
and you should have your new volume mounts.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../working-offline/" class="btn btn-neutral float-right" title="Working Offline">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../using-the-build-container/" class="btn btn-neutral" title="Using the build container"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/phase2/outrigger-docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../using-the-build-container/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../working-offline/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
