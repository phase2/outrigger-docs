<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Phase2">
  <link rel="shortcut icon" href="../../favicon.ico">
  
  <title>Key Concepts - Outrigger Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Key Concepts";
    var mkdocs_page_input_path = "project-setup/key-concepts.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-305109-83', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Outrigger Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Getting Started</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../getting-started/system-requirements/">System Requirements</a>
                </li>
                <li class="">
                    
    <a class="" href="../../getting-started/mac-installation/">Mac Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../getting-started/linux-installation/">Linux Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../getting-started/windows-installation/">Windows Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../getting-started/first-steps/">First Steps</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Project Setup</span>
    <ul class="subnav">
                <li class=" current">
                    
    <a class="current" href="./">Key Concepts</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#common-setup">Common Setup</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#project-code">Project Code</a></li>
        
            <li><a class="toctree-l4" href="#persistent-data-volume">Persistent Data Volume</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../new-projects/">New Projects</a>
                </li>
                <li class="">
                    
    <a class="" href="../existing-projects/">Existing Projects</a>
                </li>
                <li class="">
                    
    <a class="" href="../project-configuration/">Project Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../filesystem-sync/">Filesystem Sync</a>
                </li>
                <li class="">
                    
    <a class="" href="../docker-images/">Docker Images</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Common Tasks</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../common-tasks/starting-your-project-containers/">Starting your project containers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/stopping-containers-and-cleanup/">Stopping containers and cleanup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/using-the-build-container/">Using the build container</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/working-with-volumes/">Working with Volumes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/working-offline/">Working Offline</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/ssh-into-a-container/">SSH into a container</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/customizing-container-configuration/">Changing container configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/using-watches/">Using watches</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/using-xdebug-with-outrigger/">Using Xdebug with Outrigger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/accessing-logs/">Accessing logs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/inter-vm-communication/">Accessing containers from other VMs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/ssh-keys-for-private-repos/">SSH Keys for private repos</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/setting-up-mail/">Setting up mail</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/dns-resolution/">DNS Resolution</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/upgrading-rig/">Upgrading Rig</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/multiple-docker-machines/">Multiple Docker Machines</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/routine-image-maintenance/">Routine Image Maintenance</a>
                </li>
                <li class="">
                    
    <a class="" href="../../common-tasks/creating-your-own-images/">Creating your own images</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">FAQ</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../faq/general/">General</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faq/troubleshooting/">Troubleshooting</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faq/docker-for-mac/">Docker for Mac</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faq/how-to-contribute/">How to contribute</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Appendix</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../appendix/glossary/">Glossary</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appendix/return-codes/">Return Codes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appendix/architecture/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appendix/background/">Background</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appendix/library/">Library</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Outrigger Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Project Setup &raquo;</li>
        
      
    
    <li>Key Concepts</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/phase2/outrigger-docs/edit/master/docs/project-setup/key-concepts.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="common-setup">Common Setup</h1>
<p>Before you begin there are two aspects of Docker and Outrigger setup that you must be aware of.
These relate to how you share your code with your running Docker containers and how you ensure that
any data you need to persist between executions of your containers is preserved. The examples you
see throughout this documentation demonstrate configurations that take these aspects into
consideration.</p>
<h2 id="project-code">Project Code</h2>
<p>The filesystem within containers is <strong>ephemeral!</strong> Any changes made there <strong>do not persist</strong> if the 
container is restarted. (See "Persistent Data Volume" below for a storage area that is preserved.)</p>
<p>In typical Docker images the code is built <strong>directly into the container</strong> at the <code>/code</code> path. This 
is a great mechanism that allows the container to be "self contained" (pun intended), immutable and 
not need any checkout/file system. You also know when you run a container exactly what code is in 
there because you generally don’t change the code unless you rebuild the image.  </p>
<p>For development purposes, however, this is problematic because it is burdensome to rebuild an image 
for each code change. To solve this, there are a few available approaches you can take.</p>
<h3 id="approach-1-nfs-filesystem">Approach 1: NFS Filesystem</h3>
<p>Outrigger sets up an NFS filesystem from your Host Machine to the Docker host that you can leverage.
Using this, you can easily mount your project code from the Host Machine into the running 
container, effectively overriding the files built directly into the image. The running container is 
then using the local project file system for the overridden paths rather than the file system built 
into the image.  This allows a developer to use an IDE and edit code directly on the local file system 
of the Host Machine, but execute that code within the environment of the running container.</p>
<div class="admonition note">
<p class="admonition-title">Note on Project Code Location</p>
<p>Your project code <strong>must</strong> be located somewhere within your home directory (<code>/Users</code> for Macs) on 
your local machine. This is because NFS shares your home directory into the Docker Host VM, and 
only files on the Docker Host VM can be referenced in volume shares. </p>
</div>
<h3 id="approach-2-docker-volumes-and-unison">Approach 2: Docker Volumes and Unison</h3>
<p>There are some drawbacks to using the NFS Filesystem so your second option is to use a 
<a href="https://docs.docker.com/engine/tutorials/dockervolumes/">Data Volume</a> to hold a mirror of your
code base and user Outrigger's <a href="../filesystem-sync/">Filesystem Sync</a> capabilities to automatically
keep it in sync with your local code base. There are several advantages to this approach detailed
on the filesystem sync page at the cost of a slightly more complex setup. Outrigger helps manage
the creation and syncing of the data volume to minimize this complexity.</p>
<h2 id="persistent-data-volume">Persistent Data Volume</h2>
<p>Outrigger maintains a data volume on the Docker Host that is mounted at <code>/data</code> into every container. 
This volume is persistent so long as you do not perform a <code>rig remove</code> operation. This ensures 
that file access on the VM is done natively for things like databases and other things where filesystem
performance matters. If you configure a container to write to this area, you should use a project and 
container based namespace to prevent conflicts as this is a shared resource. For example, you may want 
to use a namespacing method like <code>/data/[project name]/[environment]/[service name]</code> as a safe location 
to write data. Over time you may find it necessary to manage this directory and delete old project
data. This can be done through use of <code>docker-machine ssh dev</code> and then direct manipulation of <code>/data</code>.</p>
<p>Any code from your local directories is directly shared in to the Docker Machine VM via NFS at <code>/Users</code>. 
This means that even if you destroy and re-create your Docker Host, your code will be safe since it 
lives on the Host Machine.</p>
<div class="admonition note">
<p class="admonition-title">FILE CHANGES WITHIN A CONTAINER</p>
<p>Any files that are generated or changed within a running container that you want to persist after the 
container is stopped <strong>should be put onto a persistent volume local machine</strong>.<br />
A Docker container represents immutable infrastructure, the files on the image 
are able to be changed at runtime but typically do not persist. When the container is stopped and 
run again it "boots" the files that were built into the original image. The volume at <code>/data</code> (mentioned 
above) is a persistent volume that you can use and Docker Data Volumes represent another.</p>
<p>Outrigger helps maintain the contents of the <code>/data</code> directory between upgrades of your Docker
Host Virtual Machine though occasional maintenance to remove old project data will be needed.
Docker data volumes do not persist between virtual machine upgrades but may be easier to manage
using <code>docker volume</code> commands.</p>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../new-projects/" class="btn btn-neutral float-right" title="New Projects">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../getting-started/first-steps/" class="btn btn-neutral" title="First Steps"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/phase2/outrigger-docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../getting-started/first-steps/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../new-projects/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
